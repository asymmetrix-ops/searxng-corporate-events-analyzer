# SearXNG Corporate Events Analyzer - Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER INTERFACE                                      â”‚
â”‚                         (templates/index.html)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ” Input: Company URL or Name                                          â”‚    â”‚
â”‚  â”‚  Example: "https://www.ecorth.com/" or "S&P Global"                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                             â”‚
â”‚                                    â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸš€ Analyze Button â†’ POST /analyze                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FASTAPI SERVER                                      â”‚
â”‚                              (server.py)                                         â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         POST /analyze                                     â”‚   â”‚
â”‚  â”‚  Input: { "query": "company_url_or_name" }                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                                            â”‚
â”‚                                     â–¼                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      STEP 1: XANO PRE-CHECK   â”‚    â”‚         STEP 2: AI ANALYSIS               â”‚
â”‚                               â”‚    â”‚      (searxng_analyzer.py)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚                                           â”‚
â”‚  â”‚ GET /get_company_by_url â”‚  â”‚    â”‚  Runs in parallel with Xano check         â”‚
â”‚  â”‚ Check if company exists â”‚  â”‚    â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚              â”‚                â”‚                      â”‚
â”‚              â–¼                â”‚                      â–¼
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ Company Found?          â”‚  â”‚    â”‚  2A: COMPANY TYPE DETECTION               â”‚
â”‚  â”‚                         â”‚  â”‚    â”‚  detect_company_type()                    â”‚
â”‚  â”‚  YES â†’ Get company_id   â”‚  â”‚    â”‚                                           â”‚
â”‚  â”‚  NO  â†’ AI-only mode     â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â”‚ Quick SerpAPI searches:             â”‚  â”‚
â”‚              â”‚                â”‚    â”‚  â”‚ â€¢ "{company}" founded startup       â”‚  â”‚
â”‚              â–¼                â”‚    â”‚  â”‚ â€¢ "{company}" series funding        â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”‚ â€¢ "{company}" site:crunchbase.com   â”‚  â”‚
â”‚  â”‚ If Found:               â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚ GET /Get_new_company/   â”‚  â”‚    â”‚                    â”‚                      â”‚
â”‚  â”‚ GET /Get_investors_     â”‚  â”‚    â”‚                    â–¼                      â”‚
â”‚  â”‚     corporate_events    â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â”‚ Analyze signals:                    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚                                     â”‚  â”‚
                                     â”‚  â”‚ STARTUP signals:                    â”‚  â”‚
                                     â”‚  â”‚ â€¢ "seed round", "series A"          â”‚  â”‚
                                     â”‚  â”‚ â€¢ "accelerator", "founded 202X"     â”‚  â”‚
                                     â”‚  â”‚ â€¢ "venture-backed", "startup"       â”‚  â”‚
                                     â”‚  â”‚                                     â”‚  â”‚
                                     â”‚  â”‚ ENTERPRISE signals:                 â”‚  â”‚
                                     â”‚  â”‚ â€¢ "fortune 500", "nasdaq:"          â”‚  â”‚
                                     â”‚  â”‚ â€¢ "billion revenue", "established"  â”‚  â”‚
                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                     â”‚                    â”‚                      â”‚
                                     â”‚                    â–¼                      â”‚
                                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                                     â”‚  â”‚ Output:                             â”‚  â”‚
                                     â”‚  â”‚ â€¢ is_startup: true/false            â”‚  â”‚
                                     â”‚  â”‚ â€¢ company_type: startup/enterprise  â”‚  â”‚
                                     â”‚  â”‚ â€¢ founded_year: YYYY                â”‚  â”‚
                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                                           â”‚
                    â–¼                                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2B: COMPANY OVERVIEW                     â”‚    â”‚  2C: CORPORATE EVENTS                   â”‚
â”‚  generate_summary()                       â”‚    â”‚  generate_corporate_events()            â”‚
â”‚                                           â”‚    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 1. Try Wikipedia API                â”‚  â”‚    â”‚  â”‚ SELECT QUERY SET based on type:    â”‚â”‚
â”‚  â”‚    GET wikipedia.org/api/...        â”‚  â”‚    â”‚  â”‚                                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â”‚ IF STARTUP:                        â”‚â”‚
â”‚              â”‚                            â”‚    â”‚  â”‚ â€¢ Funding rounds (seed, series)    â”‚â”‚
â”‚              â–¼                            â”‚    â”‚  â”‚ â€¢ Grants & awards                  â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”‚ â€¢ Accelerators (YC, Techstars)     â”‚â”‚
â”‚  â”‚ 2. If no Wikipedia â†’ SerpAPI search â”‚  â”‚    â”‚  â”‚ â€¢ Partnerships                     â”‚â”‚
â”‚  â”‚    "{company}" about company info   â”‚  â”‚    â”‚  â”‚ â€¢ TechCrunch, Crunchbase, Sifted   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â”‚                                    â”‚â”‚
â”‚              â”‚                            â”‚    â”‚  â”‚ IF ENTERPRISE:                     â”‚â”‚
â”‚              â–¼                            â”‚    â”‚  â”‚ â€¢ M&A acquisitions                 â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”‚ â€¢ Divestitures                     â”‚â”‚
â”‚  â”‚ 3. OpenRouter AI (Perplexity)       â”‚  â”‚    â”‚  â”‚ â€¢ PE investments                   â”‚â”‚
â”‚  â”‚    Extract structured data:         â”‚  â”‚    â”‚  â”‚ â€¢ Reuters, Bloomberg, PitchBook   â”‚â”‚
â”‚  â”‚    â€¢ Company name                   â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚    â€¢ City, Country                  â”‚  â”‚    â”‚                    â”‚                   â”‚
â”‚  â”‚    â€¢ Website URL                    â”‚  â”‚    â”‚                    â–¼                   â”‚
â”‚  â”‚    â€¢ LinkedIn URL                   â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚    â€¢ Description                    â”‚  â”‚    â”‚  â”‚ Run 49+ SerpAPI queries            â”‚â”‚
â”‚  â”‚    â€¢ Year founded                   â”‚  â”‚    â”‚  â”‚ Deduplicate by URL                 â”‚â”‚
â”‚  â”‚    â€¢ CEO name                       â”‚  â”‚    â”‚  â”‚ Collect search results             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                    â”‚                   â”‚
                                                 â”‚                    â–¼                   â”‚
                                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                                                 â”‚  â”‚ OpenRouter AI (Claude 3.5 Sonnet)  â”‚â”‚
                                                 â”‚  â”‚ Extract from search results:       â”‚â”‚
                                                 â”‚  â”‚                                    â”‚â”‚
                                                 â”‚  â”‚ For each event:                    â”‚â”‚
                                                 â”‚  â”‚ â€¢ announcement_date                â”‚â”‚
                                                 â”‚  â”‚ â€¢ closed_date                      â”‚â”‚
                                                 â”‚  â”‚ â€¢ event_short (title)              â”‚â”‚
                                                 â”‚  â”‚ â€¢ description                      â”‚â”‚
                                                 â”‚  â”‚ â€¢ deal_type                        â”‚â”‚
                                                 â”‚  â”‚ â€¢ deal_status                      â”‚â”‚
                                                 â”‚  â”‚ â€¢ value_usd                        â”‚â”‚
                                                 â”‚  â”‚ â€¢ source_url                       â”‚â”‚
                                                 â”‚  â”‚ â€¢ counterparties[]                 â”‚â”‚
                                                 â”‚  â”‚   - company_name                   â”‚â”‚
                                                 â”‚  â”‚   - type (Acquirer/Target/etc)     â”‚â”‚
                                                 â”‚  â”‚   - press_release_url              â”‚â”‚
                                                 â”‚  â”‚   - individuals[]                  â”‚â”‚
                                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                 â”‚                    â”‚                   â”‚
                                                 â”‚                    â–¼                   â”‚
                                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                                                 â”‚  â”‚ ENRICHMENT (Optional)              â”‚â”‚
                                                 â”‚  â”‚ enrich_counterparties_with_        â”‚â”‚
                                                 â”‚  â”‚ individuals()                      â”‚â”‚
                                                 â”‚  â”‚                                    â”‚â”‚
                                                 â”‚  â”‚ For each counterparty:             â”‚â”‚
                                                 â”‚  â”‚ â€¢ Find executives via Perplexity   â”‚â”‚
                                                 â”‚  â”‚ â€¢ Get press release URLs           â”‚â”‚
                                                 â”‚  â”‚ â€¢ Get LinkedIn URLs                â”‚â”‚
                                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚
                                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              2D: TOP MANAGEMENT                                          â”‚
â”‚                              get_top_management()                                        â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. SerpAPI search: "{company}" CEO OR "Chief Executive" site:linkedin.com      â”‚    â”‚
â”‚  â”‚ 2. OpenRouter AI: Extract executives (name, title, LinkedIn)                   â”‚    â”‚
â”‚  â”‚ 3. Fallback: Try Perplexity if main search fails                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚
                                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              STEP 3: MATCHING & COMPARISON                               â”‚
â”‚                              (server.py)                                                 â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Compare AI events vs DB events:                                                 â”‚    â”‚
â”‚  â”‚                                                                                 â”‚    â”‚
â”‚  â”‚ For each AI event:                                                              â”‚    â”‚
â”‚  â”‚   â†’ Extract keywords from event title                                           â”‚    â”‚
â”‚  â”‚   â†’ Compare with each DB event using Jaccard similarity                         â”‚    â”‚
â”‚  â”‚   â†’ If similarity > 40% â†’ MATCHED                                               â”‚    â”‚
â”‚  â”‚   â†’ If no match found â†’ MISSING (gap in database)                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                          â”‚
â”‚  Output:                                                                                 â”‚
â”‚  â€¢ matched_events: AI events that exist in DB                                           â”‚
â”‚  â€¢ missing_events: AI events NOT in DB (gaps to fill)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚
                                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              STEP 4: RESPONSE TO FRONTEND                                â”‚
â”‚                                                                                          â”‚
â”‚  JSON Response:                                                                          â”‚
â”‚  {                                                                                       â”‚
â”‚    "existing_company": { id: 1234 } or null,                                            â”‚
â”‚    "db_company": { name, city, country, ... },                                          â”‚
â”‚    "db_overview": { name, description, ... },                                           â”‚
â”‚    "ai_overview": { name, city, country, linkedin, description, ... },                  â”‚
â”‚    "db_events": [ ... events from Xano ... ],                                           â”‚
â”‚    "ai_events": [ ... events from AI ... ],                                             â”‚
â”‚    "missing_events": [ ... AI events not in DB ... ],                                   â”‚
â”‚    "matched_events": [ ... AI events that match DB ... ],                               â”‚
â”‚    "top_management": [ { name, title, linkedin_url } ]                                  â”‚
â”‚  }                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚
                                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND RENDERING                                          â”‚
â”‚                              (templates/index.html)                                      â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚     ğŸ¤– AI SIDE                 â”‚    â”‚     ğŸ—„ï¸ DATABASE SIDE           â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚                                â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚  AI Company Overview           â”‚    â”‚  DB Company Overview           â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚               â”‚
â”‚  â”‚  â”‚ Name: [editable]         â”‚  â”‚    â”‚  â”‚ Name: Ecorth Ltd.        â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ City: [editable]         â”‚  â”‚    â”‚  â”‚ City: London             â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ Country: [editable]      â”‚  â”‚    â”‚  â”‚ Country: UK              â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ Website: [editable]      â”‚  â”‚    â”‚  â”‚ Website: ecorth.com      â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ LinkedIn: [editable]     â”‚  â”‚    â”‚  â”‚ LinkedIn: ...            â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ Description: [textarea]  â”‚  â”‚    â”‚  â”‚ Description: ...         â”‚  â”‚               â”‚
â”‚  â”‚  â”‚                          â”‚  â”‚    â”‚  â”‚                          â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ [ğŸ“‹ Copy from DB]        â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
â”‚  â”‚  â”‚ [â• Create in Database]  â”‚  â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚                                â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚  AI Events (X events)          â”‚    â”‚  DB Events (Y events)          â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚               â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ Matched Event         â”‚  â”‚    â”‚  â”‚ Event from Xano          â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ ğŸ”´ Missing Event         â”‚  â”‚    â”‚  â”‚ - Counterparties         â”‚  â”‚               â”‚
â”‚  â”‚  â”‚    [â• Add to DB]        â”‚  â”‚    â”‚  â”‚ - Dates                   â”‚  â”‚               â”‚
â”‚  â”‚  â”‚                          â”‚  â”‚    â”‚  â”‚ - Deal type/status       â”‚  â”‚               â”‚
â”‚  â”‚  â”‚ Counterparties:          â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
â”‚  â”‚  â”‚ - Company (Role)         â”‚  â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚  â”‚   - Individual: Name [Add]â”‚  â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚                                â”‚               â”‚
â”‚  â”‚                                â”‚    â”‚                                â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘” Top Management                                                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ CEO Name - Chief Executive Officer [LinkedIn]                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   [â• Add to Database]                                                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ CFO Name - Chief Financial Officer [LinkedIn]                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   [â• Add to Database]                                                      â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“ API Log                                                                       â”‚   â”‚
â”‚  â”‚  [timestamp] Starting analysis for: "https://www.ecorth.com/"                    â”‚   â”‚
â”‚  â”‚  [timestamp] Company type: startup (founded 2017)                                â”‚   â”‚
â”‚  â”‚  [timestamp] Company not found in DB â€“ AI-only mode.                             â”‚   â”‚
â”‚  â”‚  [timestamp] AI events: 3, DB events: 0, matched: 0, missing: 3                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## External APIs Used

### 1. SerpAPI (Google Search)
- **Purpose**: Web search for company information and corporate events
- **Endpoints**: Google Search API
- **Rate Limit**: 100 searches/month (free tier)
- **Used in**: 
  - `detect_company_type()` - 3 queries
  - `generate_summary()` - fallback search
  - `generate_corporate_events()` - 49+ queries
  - `get_top_management()` - LinkedIn search

### 2. OpenRouter AI
- **Purpose**: AI-powered data extraction and analysis
- **Models Used**:
  - `anthropic/claude-3.5-sonnet` - Corporate events extraction
  - `perplexity/sonar-pro` - Company info, enrichment
  - `openai/gpt-4o-mini` - Fallback/cheaper option
- **Used in**:
  - `generate_summary()` - Company overview extraction
  - `generate_corporate_events()` - Event extraction from search results
  - `enrich_counterparties_with_individuals()` - Executive enrichment
  - `get_top_management()` - Leadership extraction

### 3. Wikipedia API
- **Purpose**: Get company summary and basic info
- **Endpoint**: `en.wikipedia.org/api/rest_v1/page/summary/{title}`
- **Used in**: `get_wikipedia_summary()`

### 4. Xano Database API
- **Purpose**: Store and retrieve company data
- **Endpoints**:
  - `GET /get_company_by_url` - Check if company exists
  - `GET /Get_new_company/{id}` - Get company details
  - `GET /Get_investors_corporate_events` - Get company events
  - `GET /get_location` - Get location ID by city/country
  - `POST /post_company_overview` - Create new company
  - `POST /create_corporate_event` - Create new event
  - `POST /post_individual` - Add individual to database
    ```json
    {
      "name": "John Smith",
      "bio": "Chief Executive Officer",
      "linkedin_URL": "https://linkedin.com/in/johnsmith",
      "locations_id": 123
    }
    ```

---

## Deal Types Supported

| Deal Type | Description | Typical for |
|-----------|-------------|-------------|
| Acquisition | Company acquired another | Enterprise |
| Sale | Company was sold/acquired | Both |
| IPO | Initial public offering | Both |
| MBO | Management buyout | Enterprise |
| Investment | VC/PE investment, funding round | Both |
| Strategic Review | Exploring strategic options | Enterprise |
| Divestment | Selling off assets/divisions | Enterprise |
| Restructuring | Corporate restructuring | Enterprise |
| Grant | Government/innovation grant | Startup |
| Partnership | Strategic partnership | Both |
| Accelerator | Accelerator/incubator program | Startup |
| Award | Competition win, prize | Startup |
| Debt financing | Loan/debt financing | Both |

---

## Advisors

Advisors are professional firms that provide advisory services during corporate transactions.

### Advisor Types
| Type | Description | Examples |
|------|-------------|----------|
| Financial Advisor | Investment banks advising on deal terms, valuation, negotiations | Goldman Sachs, Morgan Stanley, Lazard, Evercore, Centerview Partners, PJT Partners |
| Legal Advisor | Law firms handling legal documentation, regulatory filings, due diligence | Skadden, Sullivan & Cromwell, Kirkland & Ellis, Latham & Watkins, Davis Polk |
| Due Diligence | Consulting firms performing commercial/operational due diligence | McKinsey, BCG, Bain, Deloitte, EY, KPMG, PwC |
| Tax Advisor | Tax planning and structuring | Big 4 accounting firms |

### Advisor Data Structure (AI Extraction)
```json
{
  "advisor_name": "Goldman Sachs",
  "advisor_type": "Financial Advisor",
  "advised_party": "S&P Global",
  "announcement_url": "https://..."
}
```

### Display
- Advisors are shown in a yellow-highlighted section within each corporate event
- Both AI-extracted and DB events display advisors
- Format: `â€¢ Advisor Name (Type) â†’ advised Party [Link]`

---

## Startup vs Enterprise Detection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPANY TYPE DETECTION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  STARTUP SIGNALS (score +1 each):                               â”‚
â”‚  â€¢ "startup", "founded in 20XX" (2015+)                         â”‚
â”‚  â€¢ "seed round", "series A/B/C"                                 â”‚
â”‚  â€¢ "accelerator", "incubator"                                   â”‚
â”‚  â€¢ "early-stage", "venture-backed"                              â”‚
â”‚  â€¢ "pre-seed", "angel investment"                               â”‚
â”‚  â€¢ "climate tech startup", "fintech startup"                    â”‚
â”‚  â€¢ "scale-up", "growth-stage"                                   â”‚
â”‚                                                                  â”‚
â”‚  ENTERPRISE SIGNALS (score +1 each):                            â”‚
â”‚  â€¢ "fortune 500", "nasdaq:", "nyse:"                            â”‚
â”‚  â€¢ "publicly traded", "billion revenue"                         â”‚
â”‚  â€¢ "global leader", "multinational"                             â”‚
â”‚  â€¢ "established in 19XX", "100+ years"                          â”‚
â”‚  â€¢ "s&p 500", "dow jones", "ftse 100"                          â”‚
â”‚                                                                  â”‚
â”‚  DECISION:                                                       â”‚
â”‚  â€¢ startup_score > enterprise_score â†’ STARTUP queries           â”‚
â”‚  â€¢ enterprise_score > startup_score â†’ ENTERPRISE queries        â”‚
â”‚  â€¢ Unknown + no M&A history â†’ Default to STARTUP queries        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure

```
SearXNG-OpenRouter-30-10-main/
â”œâ”€â”€ server.py                 # FastAPI backend server
â”œâ”€â”€ searxng_analyzer.py       # Core analysis functions
â”‚   â”œâ”€â”€ detect_company_type()
â”‚   â”œâ”€â”€ generate_corporate_events()
â”‚   â”œâ”€â”€ generate_summary()
â”‚   â”œâ”€â”€ get_top_management()
â”‚   â””â”€â”€ enrich_counterparties_with_individuals()
â”œâ”€â”€ searxng_db.py            # Supabase database functions
â”œâ”€â”€ searxng_crawler.py       # Web scraping utilities
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html           # Frontend UI (Jinja2 + JavaScript)
â”œâ”€â”€ requirements.txt         # Python dependencies
â”œâ”€â”€ Dockerfile              # Container configuration
â”œâ”€â”€ fly.toml                # Fly.io deployment config
â””â”€â”€ .env                    # Environment variables (API keys)
```

---

## Environment Variables Required

```bash
# OpenRouter AI (required)
OPENROUTER_API_KEY=sk-or-...

# SerpAPI for Google Search (required)
SERPAPI_KEY=...

# Xano Database (required for DB features)
XANO_BASE_URL=https://xdil-abvj-o7rq.e2.xano.io

# Supabase (optional, for legacy features)
SUPABASE_URL=...
SUPABASE_KEY=...
```

---

## Data Flow Summary

```
User Input (URL/Company Name)
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Xano Check â”‚ â”€â”€â”€â”€ Company exists? â”€â”€â”€â”€ YES â”€â”€â†’ Fetch DB data
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
         â”‚                        NO
         â”‚                        â”‚
         â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Detect     â”‚         â”‚ AI-only     â”‚
    â”‚ Company    â”‚         â”‚ Mode        â”‚
    â”‚ Type       â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
STARTUP   ENTERPRISE
queries   queries
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SerpAPI    â”‚
    â”‚ Search     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ OpenRouter â”‚
    â”‚ AI Extract â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Match AI   â”‚
    â”‚ vs DB      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Render UI  â”‚
    â”‚ Side-by-   â”‚
    â”‚ Side       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

